import { Text } from "@chakra-ui/react";
import Map, { Layer, LayerProps, Marker, Source } from "react-map-gl";

const geojson = {
  type: "Feature",
  properties: {},
  geometry: {
    type: "LineString",
    coordinates: [
      [-2.7780937817456675, 55.92999706535764],
      [-2.778169503874409, 55.93007650668909],
      [-2.778395654285873, 55.93030737589268],
      [-2.778770709017749, 55.93067848965029],
      [-2.7792931441044573, 55.931178663464436],
      [-2.7799614355836866, 55.931796712048595],
      [-2.780774059492103, 55.93252144968113],
      [-2.7817294918651783, 55.9333416905321],
      [-2.782826208739607, 55.93424624895246],
      [-2.785437400139898, 55.93626357834239],
      [-2.7885954419859047, 55.93848396535847],
      [-2.792288142567344, 55.940817953672166],
      [-2.796503310177087, 55.94317610677777],
      [-2.8012287531070683, 55.94546900958173],
      [-2.8064522796491076, 55.94760726793146],
      [-2.812161698095025, 55.9495015060792],
      [-2.8183448167366976, 55.9510623620788],
      [-2.8216102037227984, 55.95168984834203],
      [-2.824989443866002, 55.95220048112489],
      [-2.828481013205135, 55.95258309075993],
      [-2.832083387775839, 55.95282650682276],
      [-2.8357950436135013, 55.952919557745275],
      [-2.8396144567558963, 55.95285107039928],
      [-2.843540103239661, 55.95260986964422],
      [-2.8475704591002113, 55.95218477784732],
      [-2.8559159189395302, 55.9510779907813],
      [-2.864620859395359, 55.949864487260015],
      [-2.87368133724749, 55.94857997295222],
      [-2.883093409271339, 55.947260157711156],
      [-2.8928531322444258, 55.945940756065056],
      [-2.902956562944354, 55.94465748737787],
      [-2.913399758148671, 55.94344607568041],
      [-2.9241787746338446, 55.94234224917258],
      [-2.9352896691786157, 55.94138173939436],
      [-2.9467284985582864, 55.940600280070555],
      [-2.9584913195515696, 55.940033605622034],
      [-2.970574188934876, 55.93971744935067],
      [-2.9829731634858376, 55.93968754129273],
      [-2.9956842999820026, 55.93997960574353],
      [-3.0087036552010034, 55.94062935845267],
      [-3.0220272859180852, 55.94167250349102],
      [-3.0286885193379476, 55.94214260371891],
      [-3.0352018393161586, 55.94231849888723],
      [-3.04157335652269, 55.9422261837679],
      [-3.047809181629731, 55.94189164743031],
      [-3.053915425306201, 55.941340874955785],
      [-3.0598981982242606, 55.940599848974614],
      [-3.0657636110527733, 55.939694551029135],
      [-3.071517774462791, 55.93865096276511],
      [-3.082716795709757, 55.93625284828687],
      [-3.093544147329254, 55.933613394955984],
      [-3.1040487146844953, 55.93094054064909],
      [-3.1142793831386086, 55.928442279072584],
      [-3.1193072819549457, 55.92732363315298],
      [-3.124285038056968, 55.92632665596972],
      [-3.1292187621159258, 55.92547735891699],
      [-3.1341145648016493, 55.924801754160114],
      [-3.138978556785304, 55.92432585355823],
      [-3.1438168487379414, 55.924075667410705],
      [-3.148635551328482, 55.924077203029356],
      [-3.1534407752290576, 55.92435646313879],
      [-3.15823863110856, 55.92493944409841],
      [-3.1630352296380977, 55.92585213395239],
      [-3.1678366814887227, 55.927120510305514],
      [-3.1726490973293267, 55.92877053802437],
      [-3.177478587833207, 55.930828166764655],
      [-3.1823312636681464, 55.93331932832393],
      [-3.1847682056693145, 55.93473558202399],
      [-3.187213235505169, 55.93626993382222],
      [-3.1896671170099182, 55.93792561888617],
      [-3.1921306140154115, 55.93970587070805],
    ],
  },
};

const dest = geojson.geometry.coordinates[0];

const lineLayer: LayerProps = {
  id: "routelayer",
  type: "line",
  paint: {
    "line-blur": 2,
    "line-width": 4,
    "line-dasharray": [4, 2],
  },
  layout: {
    "line-join": "round",
  },
};

export default function WeddingMap() {
  return (
    <Map
      style={{ width: "100%", height: "100%", minHeight: "400px" }}
      mapStyle="mapbox://styles/gausie/cl4adr758000z14odoh4bf1rd"
      initialViewState={{
        longitude: -3,
        latitude: 55.930328,
        zoom: 8,
      }}
      attributionControl={false}
      mapboxAccessToken="pk.eyJ1IjoiZ2F1c2llIiwiYSI6ImNrcGNocWN5ZjFhNTUydnQ3ODI3eGM2ajcifQ.fNcw7n-ZBtPX-zZg3zXmDg"
    >
      <Source
        id="route"
        type="geojson"
        data={geojson as GeoJSON.Feature<GeoJSON.Geometry>}
      >
        <Layer {...lineLayer} />
      </Source>
      <Marker longitude={dest[0]} latitude={dest[1]} anchor="center">
        {/** Colstoun */}
        <Text
          fontFamily="serif"
          fontStyle="italic"
          fontSize="2xl"
          textShadow="-1px -1px  #cfb5a5,-1px -1px  #cfb5a5, 1px -1px  #cfb5a5, 1px 1px  #cfb5a5, -1px 1px #cfb5a5"
        >
          X
        </Text>
      </Marker>
    </Map>
  );
}
